<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°”êµ¬ë‹ˆì‚¼ì´Œ - êµ¬ë§¤ëŒ€í–‰</title>
   /* ìƒí’ˆ ê·¸ë¦¬ë“œ: ëª¨ë°”ì¼ì—ì„œ 2ì—´ë¡œ ê³ ì • */
.product-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* ë¬´ì¡°ê±´ í•œ ì¤„ì— 2ê°œ */
    gap: 10px;
    padding: 10px;
}

/* ì¿ íŒ¡ ìŠ¤íƒ€ì¼ ìƒí’ˆ ì¹´ë“œ */
.product-card {
    background: white;
    border-radius: 8px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    border: 1px solid #eee;
}

.product-img {
    width: 100%;
    aspect-ratio: 1 / 1; /* ì •ì‚¬ê°í˜• ìœ ì§€ */
    background-color: #f9f9f9;
}

.product-info {
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.product-name {
    font-size: 13px;
    color: #333;
    line-height: 1.4;
    height: 38px; /* ë‘ ì¤„ ì œí•œ */
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.product-spec {
    font-size: 11px;
    color: #888;
}

.product-price {
    font-size: 15px;
    font-weight: bold;
    color: #ae0000; /* ì¿ íŒ¡ ëŠë‚Œì˜ ë¶‰ì€ ê³„ì—´ ê°€ê²©í‘œ */
}
</head>
<body>

<header>
    <a href="/" class="logo">ğŸ§º ë°”êµ¬ë‹ˆì‚¼ì´Œ</a>
    <div class="nav">
        {% if current_user.is_authenticated %}
            <span><b>{{ current_user.name }}</b>ë‹˜</span> | <a href="/logout">ë¡œê·¸ì•„ì›ƒ</a>
        {% else %}
            <a href="/login">ë¡œê·¸ì¸</a> | <a href="/register">íšŒì›ê°€ì…</a>
        {% endif %}
    </div>
</header>

<div class="banner">
    <h2>ì§ê±°ë˜ë¶€í„° ë§ˆíŠ¸ ì¥ë³´ê¸°ê¹Œì§€ í•œ ë²ˆì—!</h2>
</div>

<div class="container">
    <div style="text-align: center; margin-bottom: 30px;">
        
        {# ì „ì²´ë³´ê¸° ë²„íŠ¼ #}
        {% if not current_cat %}
            <a href="/" class="tab-btn tab-active">ì „ì²´ë³´ê¸°</a>
        {% else %}
            <a href="/" class="tab-btn tab-inactive">ì „ì²´ë³´ê¸°</a>
        {% endif %}

        {# ë†ì‚°ë¬¼ì§ê±°ë˜ ë²„íŠ¼ #}
        {% if current_cat == 'ë†ì‚°ë¬¼ì§ê±°ë˜' %}
            <a href="/?cat=ë†ì‚°ë¬¼ì§ê±°ë˜" class="tab-btn tab-active">ğŸšœ ë†ì‚°ë¬¼ì§ê±°ë˜</a>
        {% else %}
            <a href="/?cat=ë†ì‚°ë¬¼ì§ê±°ë˜" class="tab-btn tab-inactive">ğŸšœ ë†ì‚°ë¬¼ì§ê±°ë˜</a>
        {% endif %}

        {# ì‹ìì¬ë§ˆíŠ¸ ë²„íŠ¼ #}
        {% if current_cat == 'ì‹ìì¬ë§ˆíŠ¸' %}
            <a href="/?cat=ì‹ìì¬ë§ˆíŠ¸" class="tab-btn tab-active">ğŸ›’ ì‹ìì¬ë§ˆíŠ¸</a>
        {% else %}
            <a href="/?cat=ì‹ìì¬ë§ˆíŠ¸" class="tab-btn tab-inactive">ğŸ›’ ì‹ìì¬ë§ˆíŠ¸</a>
        {% endif %}

        {# ë‹¤ì´ì†Œ ë²„íŠ¼ #}
        {% if current_cat == 'ë‹¤ì´ì†Œ' %}
            <a href="/?cat=ë‹¤ì´ì†Œ" class="tab-btn tab-active">ğŸ“¦ ë‹¤ì´ì†Œ</a>
        {% else %}
            <a href="/?cat=ë‹¤ì´ì†Œ" class="tab-btn tab-inactive">ğŸ“¦ ë‹¤ì´ì†Œ</a>
        {% endif %}
        
    </div>

    <div class="product-grid">
    {% for p in products %}
    <div class="product-card" style="position: relative; background: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden;">
        <div style="height: 160px; background: #f3f4f6; display: flex; align-items: center; justify-content: center;">
            {% if p.image_url %}
               <img src="{{ p.image_url }}" style="width:100%; height:100%; object-fit:cover;">
            {% else %}
                <span style="font-size: 40px;">ğŸ¥¦</span>
            {% endif %}
        </div>

        <div style="padding: 15px;">
            <span style="font-size: 10px; background: #e8f5e9; color: #2e7d32; padding: 2px 8px; border-radius: 10px; font-weight: bold;">
                {{ p.category }}
            </span>
            
            <div style="font-size: 16px; font-weight: bold; margin-top: 5px;">{{ p.name }}</div>
            
            <div style="font-size: 12px; color: #666; margin: 3px 0;">
                {% if p.spec %}<i class="fas fa-box"></i> {{ p.spec }}{% endif %}
                {% if p.origin %} | <i class="fas fa-map-marker-alt"></i> {{ p.origin }}{% endif %}
            </div>

            <div style="margin-top: 10px; display: flex; align-items: baseline; gap: 5px;">
                {% if current_user.is_authenticated and current_user.grade == 'WHOLESALE' %}
                    <span style="color: #e67e22; font-size: 12px; font-weight: bold;">ë„ë§¤</span>
                    <span style="font-size: 18px; font-weight: bold; color: #333;">{{ "{:,}".format(p.price_wholesale) }}ì›</span>
                {% else %}
                    <span style="font-size: 18px; font-weight: bold; color: #333;">{{ "{:,}".format(p.price_retail) }}ì›</span>
                {% endif %}
            </div>

            <button onclick="alert('ì£¼ë¬¸ ê¸°ëŠ¥ ì—°ê²° ì¤‘ì…ë‹ˆë‹¤!')" style="width: 100%; margin-top: 12px; background: #2ecc71; color: white; border: none; padding: 10px; border-radius: 8px; font-weight: bold; cursor: pointer;">
                ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
            </button>
        </div>
    </div>
    {% endfor %}
</div>

    {% if current_user.is_admin %}
    <div style="margin-top:50px; border-top:1px dashed #ccc; padding-top:20px; text-align:center;">
        <a href="/admin/products" style="text-decoration:none; color:#34495e; font-weight:bold;">ğŸ› ï¸ ìƒí’ˆ ê´€ë¦¬ í˜ì´ì§€ ì´ë™</a>
    </div>
    {% endif %}
</div>

</body>
</html>
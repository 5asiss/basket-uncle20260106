<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°”êµ¬ë‹ˆì‚¼ì´Œ - êµ¬ë§¤ëŒ€í–‰</title>
    <style>
        :root { --main-color: #2ecc71; --point-color: #e67e22; --bg-color: #f9f9f9; }
        body { font-family: sans-serif; background-color: var(--bg-color); margin: 0; padding: 0; color: #333; }
        header { background-color: white; padding: 20px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .logo { font-size: 28px; font-weight: bold; color: var(--main-color); text-decoration: none; }
        .nav { margin-top: 15px; }
        .nav a { margin: 0 10px; text-decoration: none; color: #666; font-size: 14px; }
        .banner { background-color: var(--main-color); color: white; padding: 40px 20px; text-align: center; }
        .container { max-width: 1000px; margin: 20px auto; padding: 0 15px; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .product-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .product-img { width: 100%; height: 180px; background-color: #eee; display: flex; align-items: center; justify-content: center; }
        .product-info { padding: 15px; }
        .category-tag { font-size: 11px; background: #f1f1f1; padding: 2px 6px; border-radius: 4px; color: #666; }
        .name { font-size: 18px; margin: 5px 0; font-weight: bold; }
        .price { font-size: 19px; margin-top: 5px; }
        .btn-order { display: block; width: 100%; padding: 10px 0; background-color: var(--main-color); color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 10px; font-weight: bold; }
        
        /* íƒ­ ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .tab-btn { padding: 10px 15px; text-decoration: none; border-radius: 20px; font-size: 14px; display: inline-block; margin: 5px; transition: 0.2s; }
        .tab-active { background-color: var(--main-color); color: white; }
        .tab-inactive { background-color: #eee; color: #666; }
    </style>
</head>
<body>

<header>
    <a href="/" class="logo">ğŸ§º ë°”êµ¬ë‹ˆì‚¼ì´Œ</a>
    <div class="nav">
        {% if current_user.is_authenticated %}
            <span><b>{{ current_user.name }}</b>ë‹˜</span> | <a href="/logout">ë¡œê·¸ì•„ì›ƒ</a>
        {% else %}
            <a href="/login">ë¡œê·¸ì¸</a> | <a href="/register">íšŒì›ê°€ì…</a>
        {% endif %}
    </div>
</header>

<div class="banner">
    <h2>ì§ê±°ë˜ë¶€í„° ë§ˆíŠ¸ ì¥ë³´ê¸°ê¹Œì§€ í•œ ë²ˆì—!</h2>
</div>

<div class="container">
    <div style="text-align: center; margin-bottom: 30px;">
        
        {# ì „ì²´ë³´ê¸° ë²„íŠ¼ #}
        {% if not current_cat %}
            <a href="/" class="tab-btn tab-active">ì „ì²´ë³´ê¸°</a>
        {% else %}
            <a href="/" class="tab-btn tab-inactive">ì „ì²´ë³´ê¸°</a>
        {% endif %}

        {# ë†ì‚°ë¬¼ì§ê±°ë˜ ë²„íŠ¼ #}
        {% if current_cat == 'ë†ì‚°ë¬¼ì§ê±°ë˜' %}
            <a href="/?cat=ë†ì‚°ë¬¼ì§ê±°ë˜" class="tab-btn tab-active">ğŸšœ ë†ì‚°ë¬¼ì§ê±°ë˜</a>
        {% else %}
            <a href="/?cat=ë†ì‚°ë¬¼ì§ê±°ë˜" class="tab-btn tab-inactive">ğŸšœ ë†ì‚°ë¬¼ì§ê±°ë˜</a>
        {% endif %}

        {# ì‹ìì¬ë§ˆíŠ¸ ë²„íŠ¼ #}
        {% if current_cat == 'ì‹ìì¬ë§ˆíŠ¸' %}
            <a href="/?cat=ì‹ìì¬ë§ˆíŠ¸" class="tab-btn tab-active">ğŸ›’ ì‹ìì¬ë§ˆíŠ¸</a>
        {% else %}
            <a href="/?cat=ì‹ìì¬ë§ˆíŠ¸" class="tab-btn tab-inactive">ğŸ›’ ì‹ìì¬ë§ˆíŠ¸</a>
        {% endif %}

        {# ë‹¤ì´ì†Œ ë²„íŠ¼ #}
        {% if current_cat == 'ë‹¤ì´ì†Œ' %}
            <a href="/?cat=ë‹¤ì´ì†Œ" class="tab-btn tab-active">ğŸ“¦ ë‹¤ì´ì†Œ</a>
        {% else %}
            <a href="/?cat=ë‹¤ì´ì†Œ" class="tab-btn tab-inactive">ğŸ“¦ ë‹¤ì´ì†Œ</a>
        {% endif %}
        
    </div>

    <div class="product-grid">
        {% for p in products %}
        <div class="product-card">
            <div class="product-img">
                {% if p.image_url %}
                    <img src="{{ p.image_url }}" style="width:100%; height:100%; object-fit:cover;">
                {% else %}
                    <span style="color:#999;">ğŸ¥¦ ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘</span>
                {% endif %}
            </div>
            <div class="product-info">
                <span class="category-tag">{{ p.category }}</span>
                <div class="name">{{ p.name }}</div>
                <div class="price">
                    {% if current_user.is_authenticated and current_user.grade == 'WHOLESALE' %}
                        <span style="font-size:12px; color:var(--main-color);">ë„ë§¤ê°€</span> <b>{{ p.price_wholesale }}ì›</b>
                    {% else %}
                        <b>{{ p.price_retail }}ì›</b>
                    {% endif %}
                </div>
                <button class="btn-order" onclick="alert('ì£¼ë¬¸ ê¸°ëŠ¥ì´ ê³§ ì—°ê²°ë©ë‹ˆë‹¤!')">ğŸ§º ì£¼ë¬¸í•˜ê¸°</button>
            </div>
        </div>
        {% endfor %}
    </div>

    {% if current_user.is_admin %}
    <div style="margin-top:50px; border-top:1px dashed #ccc; padding-top:20px; text-align:center;">
        <a href="/admin/products" style="text-decoration:none; color:#34495e; font-weight:bold;">ğŸ› ï¸ ìƒí’ˆ ê´€ë¦¬ í˜ì´ì§€ ì´ë™</a>
    </div>
    {% endif %}
</div>

</body>
</html>